@import 'tailwindcss';

/* 
 * 八比特风水师 - 主题配置
 * 基于 Tailwind CSS 4 的 @theme 指令
 * UI 视觉总方案 v2.0 唯一执行标准
 */

@theme {
  /* ========== 基础色 ========== */
  --color-feng-bg-0: #0E1116;  /* 最深背景 */
  --color-feng-bg-1: #151A22;  /* 主面板 */
  --color-feng-bg-2: #202736;  /* 次面板 */
  --color-feng-bg-3: #2A3243;  /* 高层容器 */
  
  /* 兼容旧命名 */
  --color-feng-bg-deep: #0E1116;
  --color-feng-bg-panel: #151A22;
  --color-feng-bg-card: #202736;
  --color-feng-bg-muted: #3E4C43;
  
  /* ========== 文字色 ========== */
  --color-feng-text-0: #F5E4BB;  /* 主标题亮金 */
  --color-feng-text-1: #E2E8F0;  /* 主正文 */
  --color-feng-text-2: #AAB3C2;  /* 次正文 */
  --color-feng-text-3: #7B8490;  /* 弱提示 */
  
  /* 兼容旧命名 */
  --color-feng-text-primary: #E6D4B4;
  --color-feng-text-light: #D0D6E1;
  --color-feng-text-muted: #AAB3C2;
  --color-feng-text-dim: #8D97A8;
  
  /* ========== 强调色（仅一套暖金系） ========== */
  --color-feng-accent-0: #C4A06A;  /* 主强调 */
  --color-feng-accent-1: #D4B07A;  /* 高亮 */
  --color-feng-accent-2: #8B6914;  /* 深压 */
  
  /* 兼容旧命名 */
  --color-feng-accent: #C4A06A;
  --color-feng-accent-dark: #A8834E;
  
  /* ========== 语义状态色（极克制） ========== */
  --color-feng-success: #8FAE7B;  /* 仅用于"已净化" */
  --color-feng-error: #A6685B;    /* 仅用于"错误反馈" */
  
  --color-feng-border: #616C80;
  
  /* ========== 字体家族 ========== */
  --font-pixel: 'Press Start 2P', monospace;
  --font-pixel-cn: 'DotGothic16', sans-serif;
  --font-ui: 'Inter', sans-serif;
  
  /* ========== 动画时间 ========== */
  --animate-spin-slow: 4s;
  --animate-spin-fast: 1.5s;
  --animate-spin-super: 0.5s;
  
  /* ========== 动效节奏 ========== */
  --transition-page-enter: 400ms;
  --transition-panel-slide: 300ms;
  --transition-toast-fade: 200ms;
  --transition-state-switch: 400ms;
  --transition-victory: 700ms;
}

/* 全局基础样式 */
* {
  box-sizing: border-box;
}

html {
  font-family: var(--font-ui);
  background-color: var(--color-feng-bg-deep);
  color: var(--color-feng-text-light);
}

body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  min-height: 100dvh;
}

/* 像素字体平滑 */
.pixel-font {
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: pixelated;
}

/* 罗盘旋转动画 */
@keyframes compass-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.compass-spin {
  animation: compass-spin var(--animate-spin-slow) linear infinite;
}

.compass-spin--fast {
  animation-duration: var(--animate-spin-fast);
}

.compass-spin--super {
  animation-duration: var(--animate-spin-super);
}

/* 色板切换动画 */
.warm-transition {
  transition: filter 1.5s ease-out;
}

.warm-filter {
  filter: sepia(20%) saturate(1.3) hue-rotate(-10deg);
}

/* 弹窗动画 */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

/* 道具出现动画 */
@keyframes item-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  70% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-item-pop {
  animation: item-pop 0.4s ease-out;
}

/* 通关闪光 */
@keyframes victory-glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(230, 212, 180, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(230, 212, 180, 0.6);
  }
}

.animate-victory-glow {
  animation: victory-glow 2s ease-in-out infinite;
}

/* 步骤图标动画 */

/* 罗盘缓慢旋转 - 4s 一圈 */
@keyframes compass-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.compass-animate {
  animation: compass-rotate 4s linear infinite;
}

/* 葫芦摆动 - 左右 5 度 */
@keyframes gourd-swing {
  0%, 100% { transform: rotate(-5deg); }
  50% { transform: rotate(5deg); }
}

.gourd-animate {
  animation: gourd-swing 2s ease-in-out infinite;
  transform-origin: top center;
}

/* 太阳脉冲 - 呼吸发光 */
@keyframes sun-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.08);
    opacity: 0.85;
  }
}

.sun-animate {
  animation: sun-pulse 2s ease-in-out infinite;
}

/* 煞气粒子漂浮 - 随机浮动 */
@keyframes sha-float-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(3px, -5px) scale(1.05); }
  50% { transform: translate(-2px, -8px) scale(0.95); }
  75% { transform: translate(4px, -3px) scale(1.02); }
}

@keyframes sha-float-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-4px, -6px) scale(0.98); }
  66% { transform: translate(2px, -4px) scale(1.03); }
}

@keyframes sha-float-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  20% { transform: translate(2px, -7px) scale(1.02); }
  40% { transform: translate(-3px, -5px) scale(0.97); }
  60% { transform: translate(4px, -6px) scale(1.04); }
  80% { transform: translate(-2px, -3px) scale(0.99); }
}

.sha-particle-1 {
  animation: sha-float-1 3.5s ease-in-out infinite;
}

.sha-particle-2 {
  animation: sha-float-2 4s ease-in-out infinite;
}

.sha-particle-3 {
  animation: sha-float-3 4.5s ease-in-out infinite;
}

/* 页面入场动画 */
@keyframes card-slide-up {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.card-animate-in {
  animation: card-slide-up 0.5s ease-out forwards;
}

@keyframes stagger-fade-1 {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes stagger-fade-2 {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes stagger-fade-3 {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

.step-animate-1 {
  animation: stagger-fade-1 0.4s ease-out 0.6s forwards;
  opacity: 0;
}

.step-animate-2 {
  animation: stagger-fade-2 0.4s ease-out 0.8s forwards;
  opacity: 0;
}

.step-animate-3 {
  animation: stagger-fade-3 0.4s ease-out 1s forwards;
  opacity: 0;
}

/* ============================================
 * LevelSelect 页面高级感动画
 * ============================================ */

/** 花瓣自然飘落动画 */
@keyframes petal-fall {
  0% {
    transform: translateY(0) translateX(0);
    opacity: 0;
  }
  10% {
    opacity: 0.4;
  }
  25% {
    transform: translateY(25vh) translateX(10px);
  }
  50% {
    transform: translateY(50vh) translateX(-10px);
  }
  75% {
    transform: translateY(75vh) translateX(5px);
  }
  90% {
    opacity: 0.4;
  }
  100% {
    transform: translateY(110vh) translateX(0);
    opacity: 0;
  }
}

/** 花瓣缓速自转动画 */
@keyframes petal-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(calc(360deg * var(--rotate-direction, 1)));
  }
}

.petal-fall {
  animation: petal-fall linear infinite;
}

.petal-rotate {
  animation: petal-fall linear infinite, petal-rotate linear infinite;
}

/** 缩略图呼吸动画 */
@keyframes thumbnail-breathe {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

.thumbnail-breathe {
  animation: thumbnail-breathe 4s ease-in-out infinite;
}

/** 卡片悬浮动效 */
@keyframes card-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-2px);
  }
}

.card-float {
  animation: card-float 3s ease-in-out infinite;
}

/** 边缘光脉冲 */
@keyframes edge-glow {
  0%, 100% {
    box-shadow: 0 0 5px rgba(196, 160, 106, 0.3), inset 0 0 10px rgba(196, 160, 106, 0.1);
  }
  50% {
    box-shadow: 0 0 15px rgba(196, 160, 106, 0.5), inset 0 0 20px rgba(196, 160, 106, 0.2);
  }
}

.edge-glow {
  animation: edge-glow 3s ease-in-out infinite;
}

/* ============================================
 * 玻璃材质工具类（UI 视觉总方案 v2.0）
 * ============================================ */

/** 标准玻璃卡片 */
.feng-glass {
  background: linear-gradient(135deg, rgba(30, 35, 45, 0.35) 0%, rgba(21, 26, 34, 0.40) 100%);
  backdrop-filter: blur(22px) saturate(1.35);
  -webkit-backdrop-filter: blur(22px) saturate(1.35);
  border: 2px solid rgba(196, 160, 106, 0.45);
  border-radius: 2px;
  box-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.09),
    inset 0 0 48px rgba(196, 160, 106, 0.03),
    0 10px 36px rgba(0, 0, 0, 0.36),
    0 0 88px rgba(196, 160, 106, 0.06);
}

/** 轻量玻璃（用于背景层） */
.feng-glass-light {
  background: linear-gradient(135deg, rgba(30, 35, 45, 0.20) 0%, rgba(21, 26, 34, 0.25) 100%);
  backdrop-filter: blur(16px) saturate(1.2);
  -webkit-backdrop-filter: blur(16px) saturate(1.2);
  border: 1px solid rgba(196, 160, 106, 0.30);
  border-radius: 2px;
}

/** 像素风格按钮 */
.feng-btn {
  background: linear-gradient(180deg, #D4B07A 0%, #B8904F 100%);
  border-radius: 2px;
  box-shadow:
    inset -2px -2px 0px rgba(0, 0, 0, 0.25),
    inset 2px 2px 0px rgba(255, 255, 255, 0.25),
    0 4px 0px #5C4020,
    0 6px 12px rgba(0, 0, 0, 0.3),
    0 0 24px rgba(196, 160, 106, 0.25);
  color: #0E1116;
  font-family: var(--font-pixel);
  transition: transform 0.1s ease;
}

.feng-btn:hover {
  box-shadow:
    inset -2px -2px 0px rgba(0, 0, 0, 0.25),
    inset 2px 2px 0px rgba(255, 255, 255, 0.25),
    0 4px 0px #5C4020,
    0 6px 16px rgba(0, 0, 0, 0.35),
    0 0 32px rgba(196, 160, 106, 0.35);
}

.feng-btn:active {
  transform: translateY(2px);
  box-shadow:
    inset -2px -2px 0px rgba(0, 0, 0, 0.35),
    inset 2px 2px 0px rgba(255, 255, 255, 0.15),
    0 2px 0px #5C4020,
    0 4px 8px rgba(0, 0, 0, 0.3);
}

/** 像素边框装饰 */
.feng-border-pixel {
  border-radius: 2px;
  position: relative;
}

.feng-border-pixel::before {
  content: '';
  position: absolute;
  inset: -1.5px;
  border: 1px solid rgba(196, 160, 106, 0.30);
  border-radius: 2px;
  pointer-events: none;
}

.feng-border-pixel::after {
  content: '';
  position: absolute;
  inset: -0.5px;
  border: 2px solid rgba(196, 160, 106, 0.40);
  border-radius: 2px;
  pointer-events: none;
}

/** 通关渐变动画 */
@keyframes warm-crossfade {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

.feng-warm-transition {
  animation: warm-crossfade 700ms ease-out forwards;
}

/** 罗盘淡出动画 */
@keyframes compass-fadeout {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.95);
  }
}

.feng-compass-fadeout {
  animation: compass-fadeout 300ms ease-out forwards;
}

/* ============================================
 * GameStartPage 高级版动画 (v2.0)
 * ============================================ */

/** 粒子漂浮动画 - 三种变体 */
@keyframes sha-float-1 {
  0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
  25% { transform: translate(4px, -6px) scale(1.05); opacity: 0.5; }
  50% { transform: translate(-2px, -10px) scale(0.95); opacity: 0.4; }
  75% { transform: translate(5px, -4px) scale(1.02); opacity: 0.35; }
}

@keyframes sha-float-2 {
  0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.25; }
  33% { transform: translate(-5px, -8px) scale(0.98); opacity: 0.45; }
  66% { transform: translate(3px, -5px) scale(1.03); opacity: 0.35; }
}

@keyframes sha-float-3 {
  0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.35; }
  20% { transform: translate(3px, -9px) scale(1.02); opacity: 0.5; }
  40% { transform: translate(-4px, -6px) scale(0.97); opacity: 0.4; }
  60% { transform: translate(5px, -8px) scale(1.04); opacity: 0.3; }
  80% { transform: translate(-3px, -4px) scale(0.99); opacity: 0.45; }
}

.sha-particle-1 { animation: sha-float-1 6s ease-in-out infinite; }
.sha-particle-2 { animation: sha-float-2 7s ease-in-out infinite; }
.sha-particle-3 { animation: sha-float-3 8s ease-in-out infinite; }

/** 环境光呼吸 */
@keyframes ambient-breathe {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.1); }
}

.ambient-glow { animation: ambient-breathe 10s ease-in-out infinite; }

/** 流光分隔线 */
@keyframes flow-left {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

@keyframes flow-right {
  0% { background-position: -100% 0; }
  100% { background-position: 100% 0; }
}

.flowing-line-left {
  background: linear-gradient(90deg, transparent, rgba(196, 160, 106, 0.6), transparent);
  background-size: 200% 100%;
  animation: flow-left 3s linear infinite;
}

.flowing-line-right {
  background: linear-gradient(90deg, transparent, rgba(196, 160, 106, 0.6), transparent);
  background-size: 200% 100%;
  animation: flow-right 3s linear infinite;
}

/** 光脉冲 */
@keyframes glow-pulse {
  0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.5; transform: translate(-50%, -50%) scale(1.05); }
}

.glow-pulse { animation: glow-pulse 4s ease-in-out infinite; }

/** 按钮光晕呼吸 */
@keyframes button-glow {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 0.9; transform: scale(1.02); }
}

.button-glow { animation: button-glow 2s ease-in-out infinite; }

/** 按钮倒影脉冲 */
@keyframes reflection-pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.5; }
}

.button-reflection { animation: reflection-pulse 3s ease-in-out infinite; }

/** 入场动画 */
@keyframes card-enter {
  from { opacity: 0; transform: translateY(30px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.card-enter { animation: card-enter 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; }

@keyframes title-enter {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.title-enter { animation: title-enter 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.2s forwards; opacity: 0; }

@keyframes step-item-enter {
  from { opacity: 0; transform: scale(0.8) translateY(10px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

.step-item-enter { animation: step-item-enter 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards; opacity: 0; }

@keyframes text-enter {
  from { opacity: 0; }
  to { opacity: 1; }
}

.text-enter { animation: text-enter 0.5s ease-out 0.8s forwards; opacity: 0; }

@keyframes button-enter {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.button-enter { animation: button-enter 0.5s cubic-bezier(0.22, 1, 0.36, 1) 1s forwards; opacity: 0; }